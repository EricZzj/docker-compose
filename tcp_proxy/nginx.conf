error_log stderr notice;
worker_processes auto;

events {
        multi_accept on;
        use epoll;
        worker_connections 1024;
}

stream {
    upstream socks5_proxy {
        least_conn;
        server 172.16.0.30:153;
        server 172.16.0.30:158;
    }

    server {
        listen        0.0.0.0:170;
        proxy_pass    socks5_proxy;
        proxy_timeout 10m;
        proxy_connect_timeout 1s;
    }
}
